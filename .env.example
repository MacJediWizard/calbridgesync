# CalBridgeSync Configuration
# Copy this file to .env and update with your values

# Server Configuration
PORT=8080
BASE_URL=https://calbridgesync.yourdomain.com
ENVIRONMENT=production

# OIDC Authentication
OIDC_ISSUER=https://auth.yourdomain.com/application/o/calbridgesync/
OIDC_CLIENT_ID=your-client-id
OIDC_CLIENT_SECRET=your-client-secret
OIDC_REDIRECT_URL=https://calbridgesync.yourdomain.com/auth/callback

# Security Keys
# Generate with: openssl rand -hex 32
ENCRYPTION_KEY=your-64-char-hex-key-here-must-be-exactly-64-characters-long
SESSION_SECRET=your-32-char-minimum-secret-here

# Session Timeouts (optional - secure defaults are applied if not set)
# SESSION_MAX_AGE_SECS=86400          # Session timeout (default: 24 hours)
# OAUTH_STATE_MAX_AGE_SECS=300        # OAuth state timeout (default: 5 minutes, OWASP recommended)

# CORS / CSRF Protection (REQUIRED in production)
# Comma-separated list of allowed origins for CORS and Origin header validation
# Must be valid URLs with http:// or https:// prefix
# WARNING: If not set, localhost defaults are used (insecure for production)
ALLOWED_ORIGINS=https://calbridgesync.yourdomain.com

# Security Notes:
# - Account lockout: Delegated to your OIDC provider (e.g., Authentik, Keycloak).
#   Configure brute-force protection in your identity provider.
# - Rate limiting: Built-in rate limits protect against abuse (see routes.go for values).
# - All passwords are encrypted at rest using AES-GCM with the ENCRYPTION_KEY.

# Database
DATABASE_PATH=./data/calbridgesync.db

# CalDAV Default Destination
DEFAULT_DEST_URL=https://mail.yourdomain.com/SOGo/dav/

# Rate Limiting
RATE_LIMIT_RPS=10
RATE_LIMIT_BURST=20

# Sync Intervals (in seconds)
MIN_SYNC_INTERVAL=30
MAX_SYNC_INTERVAL=3600

# Alert Notifications (optional - enable to receive alerts for stale sources)
# Webhook alerts (Slack-compatible)
# ALERT_WEBHOOK_ENABLED=true
# ALERT_WEBHOOK_URL=https://hooks.slack.com/services/xxx/yyy/zzz

# Email alerts
# ALERT_EMAIL_ENABLED=true
# ALERT_SMTP_HOST=smtp.gmail.com
# ALERT_SMTP_PORT=587
# ALERT_SMTP_USERNAME=your-email@gmail.com
# ALERT_SMTP_PASSWORD=your-app-password
# ALERT_SMTP_FROM=alerts@yourdomain.com
# ALERT_SMTP_TO=admin1@yourdomain.com,admin2@yourdomain.com
# ALERT_SMTP_TLS=true

# Cooldown between repeated alerts for the same source (default: 60 minutes)
# ALERT_COOLDOWN_MINUTES=60
